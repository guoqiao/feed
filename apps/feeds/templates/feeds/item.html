{% extends "feeds/base.html" %}

{% block content %}
<h3 class="item-title">{{obj.title}}</h3>
<div class="row-fluid item-meta">
    <div class="span8">
        <ul class="inline unstyled muted">
            <li>
            来自: <a href="{{obj.feed.get_absolute_url}}">{{obj.feed.title}}</a>
            </li>
            {% if obj.author %}
            <li>
            作者: <span class="item-author">{{obj.author}}</span>
            </li>
            {% endif %}
            {% if obj.published %}
            <li>
            发布于: <span class="item-published">{{obj.published}}</span>
            </li>
            {% endif %}
            <li>
            <a href="{{obj.link}}" target="_blank">阅读原文...</a>
            </li>
        </ul>
    </div>
    <div class="span4">
        {% if obj.content %}
        <div class="pull-right kindleWidget">
            <img src="https://d1xnn692s7u6t6.cloudfront.net/white-25.png" />
            <span>推送到 Kindle</span>
        </div>
        {% endif %}
    </div>
</div>

<div class="well item-content">
{% if obj.content %}
{{obj.content|safe}}
{% else %}
<h4>文明用语,科学上网,你懂的~</h4>
<p>
由于某种神秘力量的作用,我们无法获取这篇文章的内容.
你可以试试 <a href="{{obj.link}}" target="_blank">阅读原文</a>.
</p>
<p>
Good Luck :)
</p>
{% endif %}
</div>
{% endblock %}

{% block css_extra %}
{{block.super}}
<style type="text/css">
.kindleWidget {
    display:inline-block;
    padding:3px;
    cursor:pointer;
    font-size:11px;
    font-family:Arial;
    white-space:nowrap;
    line-height:1;
    border-radius:3px;
    border:#ccc thin solid;
    color:black;
    background:transparent url('https://d1xnn692s7u6t6.cloudfront.net/button-gradient.png') repeat-x;
    background-size:contain;
}

.kindleWidget img {
    vertical-align:middle;
    margin:0;
    padding:0;
    border:none;
}

.kindleWidget span {
    vertical-align:middle;
    margin-left:5px;
}

.item-meta {
    margin-bottom: 10px;
}

.item-meta ul {
    margin-top: 5px;
}
</style>
{% endblock %}

{% block js_extra %}
{{block.super}}
<script type="text/javascript" src="https://d1xnn692s7u6t6.cloudfront.net/widget.js"></script>
<script type="text/javascript">
(function k(){
 window.$SendToKindle&&window.$SendToKindle.Widget?$SendToKindle.Widget.init({
     "content":".item-content",
     "exclude":".item-content > p:last-child",
     "title":".item-title",
     "author":".item-author",
     "published":".item-published"}):setTimeout(k,500);})();
</script>
{% endblock %}

